<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja VIP | BLOC.GG</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <nav class="navbar">
        <div class="logo">
            <a href="index.html"><img src="logo.png" alt="BLOC.GG Logo"></a>
        </div>
        <div class="menu">
            <a href="index.html">Home</a>
            <a href="#" class="active" style="color: #ffc107;">Loja VIP</a> <a href="https://discord.gg/zcCNP3wxtn" target="_blank" class="btn-login"><i class="fa-brands fa-discord"></i> Discord</a>
        </div>
    </nav>

    <div class="store-container">
        
        <header class="store-header">
            <h1>Torne-se <span class="highlight">VIP</span></h1>
            <p>Tenha acesso exclusivo ao comando <b>!ws !knife !gloves</b> e destaque-se no servidor.</p>
        </header>

        <div class="pricing-grid">
            
            <div class="price-card">
                <h3>Membro</h3>
                <div class="price">R$ 0,00</div>
                <ul class="features-list">
                    <li><i class="fa-solid fa-check"></i> Acesso aos servidores</li>
                    <li><i class="fa-solid fa-check"></i> Participar do Ranking</li>
                    <li class="disabled"><i class="fa-solid fa-xmark"></i> Skins (!ws, !knife)</li>
                    <li class="disabled"><i class="fa-solid fa-xmark"></i> Slot Reservado</li>
                    <li class="disabled"><i class="fa-solid fa-xmark"></i> Tag no Chat</li>
                </ul>
                <a href="#" class="btn-plan btn-outline">VOCÊ JÁ TEM</a>
            </div>

            <div class="price-card featured">
                <div class="badge">MAIS VENDIDO</div>
                <h3>VIP Gold</h3>
                <div class="price">R$ 14,90 <span class="period">/mês</span></div>
                <ul class="features-list">
                    <li><i class="fa-solid fa-check"></i> <b>Skins de Armas (!ws)</b></li>
                    <li><i class="fa-solid fa-check"></i> <b>Facas (!knife)</b></li>
                    <li><i class="fa-solid fa-check"></i> Slot Reservado (Entra com server full)</li>
                    <li><i class="fa-solid fa-check"></i> Tag [VIP] no Chat/Tab</li>
                    <li class="disabled"><i class="fa-solid fa-xmark"></i> Double Jump</li>
                </ul>
                <a href="LINK_DO_MERCADO_PAGO_AQUI" target="_blank" class="btn-plan btn-primary">COMPRAR AGORA</a>
            </div>

            <div class="price-card">
                <h3>VIP Diamond</h3>
                <div class="price">R$ 24,90 <span class="period">/mês</span></div>
                <ul class="features-list">
                    <li><i class="fa-solid fa-check"></i> <b>Tudo do VIP Gold</b></li>
                    <li><i class="fa-solid fa-check"></i> <b>Luvas (!gloves)</b></li>
                    <li><i class="fa-solid fa-check"></i> Skins de Agente (!agents)</li>
                    <li><i class="fa-solid fa-check"></i> Double Jump</li>
                    <li><i class="fa-solid fa-check"></i> Reset de Score (!rs)</li>
                </ul>
                <button class="btn-plan btn-outline">COMPRAR AGORA</button>
            </div>

        </div>
    </div>
<script src="main.js"></script>
</body>
<script>
    // Função que roda assim que o site carrega
    window.onload = function() {
        fetch('/user')
            .then(response => response.json())
            .then(data => {
                const btnAdmin = document.querySelector('.btn-admin');
                const btnLogin = document.querySelector('.btn-login');

                // Por padrão, esconde o botão Admin
                if(btnAdmin) btnAdmin.style.display = 'none';

                if (data.logged) {
                    // Usuário está logado
                    btnLogin.innerHTML = `<img src="${data.user.photos[0].value}" style="width:24px;border-radius:50%;vertical-align:middle;margin-right:5px;"> ${data.user.displayName}`;
                    btnLogin.href = "/logout"; // Muda o botão para Logout
                    
                    // SE FOR ADMIN, MOSTRA O BOTÃO!
                    if (data.isAdmin && btnAdmin) {
                        btnAdmin.style.display = 'flex'; // Torna visível
                    }
                } else {
                    // Não está logado
                    btnLogin.textContent = 'LOGIN STEAM';
                    btnLogin.href = "/auth/steam";
                }
            })
            .catch(error => console.error('Erro ao verificar login:', error));
    };
</script>
</body>
</html>